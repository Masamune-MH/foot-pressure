# Gitコマンドの使い方ガイド

## 目次
1. [Gitとは](#gitとは)
2. [基本的なコマンド](#基本的なコマンド)
3. [リモートリポジトリとの連携](#リモートリポジトリとの連携)
4. [ブランチの使い方](#ブランチの使い方)
5. [複数人での開発](#複数人での開発)
6. [よくある操作の例](#よくある操作の例)

---

## Gitとは

Gitは、プログラムの変更履歴を管理するツールです。以下のようなことができます：

- **変更履歴の保存**: いつ、誰が、何を変更したかを記録
- **過去の状態に戻る**: 以前のバージョンに戻すことができる
- **複数人での開発**: 複数の人が同時に作業しても、変更を統合できる
- **ブランチ機能**: 新しい機能を試すときに、元のコードを壊さずに作業できる

---

## 基本的なコマンド

### 1. リポジトリの初期化

```bash
# 新しいプロジェクトをGitで管理する場合
git init
```

### 2. ファイルの状態を確認

```bash
# 現在の状態を確認（変更されたファイル、追加されたファイルなど）
git status
```

### 3. ファイルをステージング（準備）する

```bash
# 特定のファイルを追加
git add ファイル名

# すべての変更を追加
git add .

# 例：code.pyを追加する場合
git add code.py
```

### 4. 変更をコミット（記録）する

```bash
# 変更を記録する（-m でメッセージを指定）
git commit -m "変更内容の説明"

# 例：READMEを更新した場合
git commit -m "READMEを更新しました"
```

**コミットメッセージの書き方のコツ：**
- 何を変更したかがわかるように書く
- 例：「ユーザー登録機能を追加」「バグを修正」「READMEを更新」

### 5. 変更履歴を確認

```bash
# コミット履歴を見る
git log

# 見やすく表示する
git log --oneline

# グラフ形式で表示する
git log --graph --oneline
```

### 6. 変更内容を確認

```bash
# 変更された内容を見る
git diff

# ステージング後の変更を見る
git diff --staged
```

---

## リモートリポジトリとの連携

リモートリポジトリは、GitHubやGitLabなど、インターネット上にあるリポジトリのことです。

### 1. リモートリポジトリをクローン（ダウンロード）する

```bash
# GitHubなどからプロジェクトをダウンロード
git clone https://github.com/ユーザー名/リポジトリ名.git

# 例
git clone https://github.com/example/my-project.git
```

### 2. リモートリポジトリの設定を確認

```bash
# リモートリポジトリの一覧を見る
git remote -v
```

**`fetch` と `push` の違い：**

`git remote -v` を実行すると、同じURLが2回表示されますが、それぞれ意味が違います：

- **`fetch`**: リモートリポジトリから情報を**取得する**（ダウンロード）ときに使うURL
  - `git fetch` や `git pull` を実行するときに使用
  - 「リモートから最新の情報を取ってくる」という意味

- **`push`**: ローカルの変更をリモートリポジトリに**送信する**（アップロード）ときに使うURL
  - `git push` を実行するときに使用
  - 「自分の変更をリモートに送る」という意味

**簡単に言うと：**
- **fetch** = リモート → ローカル（取得）
- **push** = ローカル → リモート（送信）

通常は同じURLが設定されていますが、fetch用とpush用で異なるURLを設定することもできます（特殊な場合のみ）。

### 3. 変更をアップロード（プッシュ）する

```bash
# ローカルの変更をリモートにアップロード
git push origin main

# 初めてプッシュする場合
git push -u origin main
```

**注意**: `main` はブランチ名です。プロジェクトによっては `master` の場合もあります。

### 4. リモートの変更をダウンロード（プル）する

```bash
# リモートの最新の変更を取得してマージ
git pull origin main

# または、フェッチとマージを分けて実行
git fetch origin
git merge origin/main
```

**`git fetch` と `git merge` の違い：**

- **`git fetch`**: リモートリポジトリの情報を**取得するだけ**（ダウンロード）
  - リモートの状態を確認できるようになる
  - **ローカルのファイルは変更されない**
  - 安全にリモートの状態を確認したいときに使う

- **`git merge`**: 取得した変更を**ローカルのブランチに統合する**（マージ）
  - 実際にローカルのファイルが変更される
  - 自分の変更とリモートの変更を統合する

**`git pull` との関係：**

`git pull` は `git fetch` + `git merge` を**一度に実行**するコマンドです：

```bash
# これらは同じ意味
git pull origin main

# 以下を順番に実行したのと同じ
git fetch origin
git merge origin/main
```

**使い分けのコツ：**

- **`git pull`**: すぐに最新の変更を取り込みたいとき（よく使う）
- **`git fetch` + `git merge`**: まずリモートの状態を確認してから統合したいとき
  - `git fetch` で確認 → `git log origin/main` で変更を見る → 問題なければ `git merge`

---

## ブランチの使い方

ブランチは、コードの「枝」のようなものです。新しい機能を開発するときや、バグを修正するときに、元のコードに影響を与えずに作業できます。

### ブランチとは？

- **main（master）ブランチ**: 通常、本番用のコードが入っている
- **featureブランチ**: 新しい機能を開発するためのブランチ
- **bugfixブランチ**: バグを修正するためのブランチ

### 1. ブランチの一覧を確認

```bash
# ローカルのブランチ一覧
git branch

# リモートも含めて確認
git branch -a
```

### 2. 新しいブランチを作成

```bash
# 新しいブランチを作成して移動
git checkout -b ブランチ名

# 例：ログイン機能を追加する場合
git checkout -b feature/login

# または（新しいGitのバージョン）
git switch -c feature/login
```

### 3. ブランチを切り替える

```bash
# 別のブランチに移動
git checkout ブランチ名

# 例：mainブランチに戻る
git checkout main

# または（新しいGitのバージョン）
git switch main
```

### 4. ブランチをマージ（統合）する

```bash
# mainブランチに移動してから
git checkout main

# 他のブランチをマージ
git merge ブランチ名

# 例：feature/loginブランチをマージ
git merge feature/login
```

### 5. ブランチを削除

```bash
# マージ済みのブランチを削除
git branch -d ブランチ名

# 強制削除（マージしていなくても削除）
git branch -D ブランチ名
```

---

## 複数人での開発

複数人で開発するときは、以下の流れが一般的です。

### 基本的な流れ

1. **最新の状態を取得**: `git pull` で最新のコードを取得
2. **ブランチを作成**: 自分の作業用ブランチを作る
3. **作業する**: コードを書く、変更を加える
4. **コミット**: 変更を記録する
5. **プッシュ**: リモートにアップロード
6. **プルリクエスト**: 変更を統合してもらう依頼（GitHubなど）

### 1. 作業を始める前の準備

```bash
# 最新の状態を取得
git pull origin main

# 新しいブランチを作成
git checkout -b feature/自分の作業内容
```

### 2. 作業中

```bash
# 変更を確認
git status

# 変更を追加
git add .

# コミット
git commit -m "変更内容の説明"

# リモートにプッシュ
git push origin feature/自分の作業内容
```

### 3. コンフリクト（競合）が発生した場合

複数の人が同じファイルを変更すると、コンフリクトが発生することがあります。

```bash
# プルしようとしたらコンフリクトが発生
git pull origin main

# コンフリクトが発生したファイルを確認
git status

# ファイルを開いて、<<<<<<< と >>>>>>> の間を編集
# どちらの変更を残すか、または両方を統合するか決める

# 解決したら
git add 解決したファイル名
git commit -m "コンフリクトを解決"
```

**コンフリクトの解決方法：**
1. エディタでファイルを開く
2. `<<<<<<<` と `=======` の間が自分の変更
3. `=======` と `>>>>>>>` の間が相手の変更
4. どちらを残すか、または両方を統合する
5. `<<<<<<<`, `=======`, `>>>>>>>` の行を削除
6. `git add` と `git commit` で完了

### 4. プルリクエスト（Pull Request）の作成

GitHubなどでは、ブランチをマージする前にプルリクエストを作成します。

1. GitHubのリポジトリページにアクセス
2. 「Pull requests」タブをクリック
3. 「New pull request」をクリック
4. 自分のブランチを選択
5. 変更内容を説明して作成

### 5. 他の人の変更を取り込む

```bash
# 最新の変更を取得
git pull origin main

# 自分のブランチに取り込む
git merge main
# または
git rebase main
```

---

## よくある操作の例

### 例1: 新しいプロジェクトを始める

```bash
# 1. プロジェクトフォルダに移動
cd my-project

# 2. Gitを初期化
git init

# 3. ファイルを追加
git add .

# 4. 最初のコミット
git commit -m "Initial commit"

# 5. GitHubでリポジトリを作成した後、リモートを追加
git remote add origin https://github.com/ユーザー名/リポジトリ名.git

# 6. プッシュ
git push -u origin main
```

### 例2: 新しい機能を追加する

```bash
# 1. 最新の状態を取得
git pull origin main

# 2. 新しいブランチを作成
git checkout -b feature/new-feature

# 3. コードを書く、変更を加える
# （ファイルを編集）

# 4. 変更を確認
git status

# 5. 変更を追加
git add .

# 6. コミット
git commit -m "新しい機能を追加"

# 7. リモートにプッシュ
git push origin feature/new-feature

# 8. GitHubでプルリクエストを作成
```

### 例3: 間違えてコミットした場合

```bash
# 直前のコミットメッセージを変更
git commit --amend -m "正しいメッセージ"

# まだプッシュしていない場合、変更を取り消す
git reset --soft HEAD~1  # 変更は残る
git reset --hard HEAD~1  # 変更も消える（注意！）

# 既にプッシュした場合（注意して使う）
git push --force origin ブランチ名
```

### 例4: 変更を一時的に退避する

```bash
# 作業中の変更を一時的に保存
git stash

# 保存した変更を確認
git stash list

# 保存した変更を戻す
git stash pop

# 保存した変更を削除
git stash drop
```

---

## 便利なコマンド一覧

| コマンド | 説明 |
|---------|------|
| `git status` | 現在の状態を確認 |
| `git add .` | すべての変更を追加 |
| `git commit -m "メッセージ"` | 変更を記録 |
| `git log` | 履歴を確認 |
| `git pull` | リモートの変更を取得 |
| `git push` | リモートにアップロード |
| `git branch` | ブランチ一覧 |
| `git checkout -b ブランチ名` | 新しいブランチを作成 |
| `git merge ブランチ名` | ブランチを統合 |
| `git diff` | 変更内容を確認 |

---

## 注意事項

1. **コミット前に確認**: `git status` で何が変更されるか確認してからコミット
2. **意味のあるメッセージ**: コミットメッセージは後で見返したときにわかるように書く
3. **プッシュ前にプル**: 他の人の変更を取り込んでからプッシュする
4. **ブランチを活用**: 大きな変更はブランチを作ってから作業する
5. **バックアップ**: 重要な変更は定期的にコミット・プッシュする

---

## 困ったときは

```bash
# ヘルプを見る
git help コマンド名

# 例
git help commit
git help branch
```

GitHubの公式ドキュメントや、Gitの公式サイトも参考になります。

---

## まとめ

1. **基本の流れ**: `git add` → `git commit` → `git push`
2. **ブランチ**: 新しい機能はブランチを作ってから作業
3. **複数人開発**: `git pull` で最新を取得してから作業開始
4. **コミットメッセージ**: 何を変更したかわかるように書く

これで基本的なGitの使い方がわかります！実際に使ってみることが一番の勉強になります。

